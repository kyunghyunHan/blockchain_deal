# 블록체인 거래

## 비트코인 거래 생성
A 가 B에게 1코인을 주는 거래가 발생햇다고 가정
이것은 의사 표현만 한것이지 실제로 가치가 이동하지 않은 단계
ex)비트코인 거래는 거래를 생성하는 사람과 거래서명을 하는 사람이 같을 필요는 없다.즉  수표거래와 비슷하다고 생각하면 댐 
## 비트코인 거래 서명
비트코인 거래가 생성되면 누가 거래를 생성했든,자금원의 소유자가 해당 거래에 대한 서명을 해야한다.서명이 완료되면 비로서 이거래의 거래가 유효해진다 , 그리고 비트코인 송금에 필요한 모든 정보가 담겨잇는 거래정보가 생겨난다.A가 B에게 1코인을 보낸다 는 내용이 적혀 있는 수표가 생겨난것과 비슷
## 비트코인 거래 정보 전송
A가 B에게 1코인을 보낸다 라는 내용이 담긴 거래정보를 A 와 B둘만 알고 있어서는 거래가 성사 될수 없다. 이 거래 정보는 비트코인 네트워크에 전송되어야 한다.수많은 노드중 하나에 이거래 정보가 도달해야 한다는 이야기이다

#### 정보를 제공할떄 상대방에 대한 신뢰가 없어도 가능한 3가지
- 블록체인에서 거래정보가 입력되다는 것은 단순히 스크립트가 네트워크상에 업로드 되는 것이고 이것 역시 암호화된 상태로 입력된다
- 기밀정보, 개인키, 인정서를 포함되자 않기 떄문에 공개적으로 전송이 가능하다.기밀정보를 포함되자 않는 거래정보를 공유 하는 것이다.거래정보가 하나의 노드에 도달하기만 하면 전세계 사람들 누구나 열람이 가능한 OPEN SOURCE 가 될수 있는이유가 바로 여기에 있다.
- 비트코인 소비자들과 채굴자들은 비트코인에 부여된 가치가 떨어지면 스스로가 손해다.떄문에 좋은 방향으로 합의를 보려고 하는 경제적 유인도 있다


## 비트코인 거래정보 전파
거래정보가 일단 하나에 노드에 도달하면 이노드는 비트코인 네트워크 상에 있는 모든 노드에게 이거래 정보를 전파해야한다.비트코인 네트워크는 P2P를 기반으로 하기 떄문에 모든 노드는 동등한 지위를 가지고 있고,정보 하나를 수천개의 노드에 전파하는데 불과 몇초도 걸리지 않는다
비트코인 거래정보가 안전하게 남을수 있는 이유가 바로 여기에 있다 이렇게 각각의 노드들이 거래를 유효화 하고 각자가 정보 전달의 시발점이 되는 역홯을 하기때문에 공격자가 들어오더라도 어느곳을 공격할지 알 수 없게 되는 것이다.

## 비트코인 거래 완료

이렇게 전파되는 과정에서 이 거래정보가 손상되지 않은 데이터인지 채굴 노드들에 의해 검증되면 비로소 이 거래정보가 영구적으로 블록에 기록된다. 이제 진짜로 A가B에게 1코인을 전송햇다고 할수 있는 것이다. 이렇게 기록된 정보는 이후에 위조,혹은 변조하는 것이 불가능하다

## A의 계좌에서 B의 계좌로 돈이 이동하는 과정
보낼 금액에 몇 코인을 보낼지 입력하는 입력값을 넣으면,해당 입력값에 대응하는 지갑 주소에서 몇 BTC를 나타내는 출력값이 생긴다 이 출력값은 블록에 기록된다.즉 이 출력값이 지갑에 찍히는 잔액덩어리 인셈이다
- 블록에 있는 비트코인의 구성은 소비되지 않은 거래의 출력값(UTXO)로 구성된다.
## 비트코인 잔액 "UTXO"

각 지갑의 UTXO들은 해당 지갑 주인마다 다르게 암호화 되어 있고,이 암호화된 UTXO는 블록체인 상에서 해당 UTXO의 주인을 인식하고 있는 전체 블록체인
